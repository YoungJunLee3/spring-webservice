# key 시스템 구축

스프링부트로 구축하는 웹 서비스 기반, KEY 정보를 등록하는 API 구현

* 구현을 앞두고 고민거리
 - 프레임웍, 라이브러리, 빌드환경의 선정 
    ( 시스템별 기 구축된 프레임워크로 개발했던 환경에서 탈피 하여야 했다. 처음부터 무엇을 어떻게 해야 하는가? )
  
  * 실로 이 문제 때문에 구현의 시간만큼 개발환경을 만드는데에 공수가 많이 투입되었다.
    본업을 마치고 작성하며 api 구현을 시작도 못하고 이것먼저 한다는것에 대한 심적 압박이 컸다.
    닭과 달걀의 문제로 당연히 빌드환경을 먼저 만들어야 했지만!!

* 선정 결과
 - 언어 Java
 - 스프링부트 2.4.2 및 라이브러리 적용 (handlebars, lombook, generex 추가 )
 - h2 메모리 디비를 이용 DB(REGISTER, KEY) 에 등록가능하게 구현

1. KEY 정보를 등록하는 API ( /register )
 
   1. POST /register 로 키 정보를 등록요청
   2. 등록되어있는 경우 등록하지 않고 종료한다.
   3. 등록되어있지 않을 경우 등록하고 200 OK 메시지를 내보낸다. 

3. KEY 별로 새로운 KEY를 하나 발급 받는 API ( /request )

   1. POST /request 로 키 정보를 등록요청.
   2. 발급요청을 받을 key 정보를 조회 해 온다.
   3. keyType 별 키 등록 절차를 수행한다.

       * claim-number , string 형식
         - 정규식 및 랜덤 문자열으로  AABB-CC33-FFDD-ZZ33 형식의 키를 발급 

       * policy-number , number 형식
         - math.random() 을 통해 난수생성하여 minLengh를 충족하는 키를 발급한다.
   
    4. key 가 기존에 키와 중복되는지 확인한다. ( Key 테이블 )
    5. dup 키의 경우 3번 절차를 다시 수행함.
    6. 중복되지 않은 키는 KEY테이블에 저장하고 , POST 리턴해준다.

* 생성결과
![KakaoTalk_20210417_135313590](https://user-images.githubusercontent.com/50125001/115106599-af537c80-9fa0-11eb-827e-0c4bc11628a3.png)

